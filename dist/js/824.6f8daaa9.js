"use strict";(self["webpackChunklaitoutiao"]=self["webpackChunklaitoutiao"]||[]).push([[824],{824:function(t,e,i){i.r(e),i.d(e,{default:function(){return tt}});var n=function(){var t=this,e=t._self._c;return e("div",[e("van-nav-bar",{attrs:{title:"文章详情",fixed:"",placeholder:"","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"container"},[e("div",{staticClass:"article-content",style:{height:"calc("+t.windowHeight+" - 100px)"}},[e("h1",{staticClass:"title"},[t._v(t._s(t.title))]),e("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:!t.article.time}},[e("van-cell",{staticClass:"user-info",attrs:{center:""}},[e("div",{staticClass:"name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.article.author))]),e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.article.avatar},slot:"icon"}),e("div",{staticClass:"pubdate",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.article.time))])],1),e("div",{ref:"articleContent",staticClass:"markdown-body",domProps:{innerHTML:t._s(t.article.content)}})],1),e("van-divider",{ref:"divider",style:{borderColor:"#999",height:"5px"}}),e("div",{staticClass:"section-title2"},[t._v("热门评论")]),e("div",[e("van-list",{attrs:{finished:t.commentFinished},on:{load:t.getCommentList},scopedSlots:t._u([{key:"finished",fn:function(){return[e("div",[0===t.commentList.length?e("p",[t._v("抢沙发")]):e("p",[t._v("没有更多数据了")])])]},proxy:!0}]),model:{value:t.commentLoading,callback:function(e){t.commentLoading=e},expression:"commentLoading"}},t._l(t.commentList,(function(i,n){return e("van-cell",{key:i._id,staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:i.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},on:{click:function(e){return t.openReply(i,n)}},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(i.info.nickname))]),e("div",{staticClass:"like-w"},[e("van-icon",{staticClass:"like-icon",class:{liked:i.is_like},attrs:{name:"good-job"},on:{click:function(e){return e.stopPropagation(),t.toggleCommentLike(i._id,i.is_like,n)}}}),e("span",{staticClass:"like-count"},[t._v(t._s(0==i.like_count?"":i.like_count))])],1)]),e("div",{staticClass:"content"},[t._v(t._s(i.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(i.create_time)))]),e("van-button",{staticClass:"reply-btn",attrs:{round:"",size:"mini"},on:{click:function(e){return e.stopPropagation(),t.popupShow(1,i.info.nickname,i._id,n)}}},[t._v(t._s(0==i.reply_num?"":i.reply_num)+"回复")])],1)])],1)})),1)],1)],1)]),e("div",{staticClass:"article-bottom"},[e("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){return t.popupShow(0)}}},[t._v("写评论")]),0==t.article.comment?e("van-icon",{attrs:{name:"comment-o",color:"#777"}}):e("van-icon",{attrs:{name:"comment-o",color:"#777",badge:t.article.comment}}),e("van-icon",{attrs:{name:"star",color:t.article.is_fav?"#f00":"#777"},on:{click:t.toggleFav}}),e("van-icon",{attrs:{name:"good-job",color:t.article.is_like?"#f00":"#777"},on:{click:t.toggleLike}}),e("van-icon",{attrs:{name:"share",color:"#777777"},on:{click:function(e){t.showShare=!0}}})],1),e("van-popup",{attrs:{position:"bottom"},model:{value:t.commentPopupShow,callback:function(e){t.commentPopupShow=e},expression:"commentPopupShow"}},[e("div",{staticClass:"post-comment"},[e("van-field",{ref:"content",attrs:{rows:"4",autosize:"",type:"textarea",maxlength:"1000",placeholder:t.reply_placeholder,"show-word-limit":""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),e("div",{staticStyle:{width:"100%"}},[e("van-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)],1)]),e("van-popup",{staticStyle:{height:"100%"},attrs:{round:"",overlay:!1,position:"bottom"},model:{value:t.replyPopupShow,callback:function(e){t.replyPopupShow=e},expression:"replyPopupShow"}},[e("replyCom",{key:t.key,attrs:{article_id:t.article_id,replyInfo:t.replyInfo},on:{close:function(e){t.replyPopupShow=!1}}}),e("div",{staticClass:"article-bottom"},[e("van-button",{staticClass:"comment-btn",attrs:{type:"default",round:"",size:"small"},on:{click:function(e){return t.popupShow(1,t.replyInfo.info.nickname,t.replyInfo._id)}}},[t._v("写评论")])],1)],1),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)},s=[],o=(i(8924),i(5638),i(885),i(4240),i(1510),i(9299)),a=i(855),r=i(7846),l=i(6811),c=["qq","link","weibo","wechat","poster","qrcode","weapp-qrcode","wechat-moments"],u=(0,a.d)("share-sheet"),h=u[0],d=u[1],m=u[2],p=h({props:(0,o.Z)({},r.M,{title:String,duration:String,cancelText:String,description:String,getContainer:[String,Function],options:{type:Array,default:function(){return[]}},overlay:{type:Boolean,default:!0},closeOnPopstate:{type:Boolean,default:!0},safeAreaInsetBottom:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}}),methods:{onCancel:function(){this.toggle(!1),this.$emit("cancel")},onSelect:function(t,e){this.$emit("select",t,e)},toggle:function(t){this.$emit("input",t)},getIconURL:function(t){return-1!==c.indexOf(t)?"https://img01.yzcdn.cn/vant/share-sheet-"+t+".png":t},genHeader:function(){var t=this.$createElement,e=this.slots("title")||this.title,i=this.slots("description")||this.description;if(e||i)return t("div",{class:d("header")},[e&&t("h2",{class:d("title")},[e]),i&&t("span",{class:d("description")},[i])])},genOptions:function(t,e){var i=this,n=this.$createElement;return n("div",{class:d("options",{border:e})},[t.map((function(t,e){return n("div",{attrs:{role:"button",tabindex:"0"},class:[d("option"),t.className],on:{click:function(){i.onSelect(t,e)}}},[n("img",{attrs:{src:i.getIconURL(t.icon)},class:d("icon")}),t.name&&n("span",{class:d("name")},[t.name]),t.description&&n("span",{class:d("option-description")},[t.description])])}))])},genRows:function(){var t=this,e=this.options;return Array.isArray(e[0])?e.map((function(e,i){return t.genOptions(e,0!==i)})):this.genOptions(e)},genCancelText:function(){var t,e=this.$createElement,i=null!=(t=this.cancelText)?t:m("cancel");if(i)return e("button",{attrs:{type:"button"},class:d("cancel"),on:{click:this.onCancel}},[i])},onClickOverlay:function(){this.$emit("click-overlay")}},render:function(){var t=arguments[0];return t(l.Z,{attrs:{round:!0,value:this.value,position:"bottom",overlay:this.overlay,duration:this.duration,lazyRender:this.lazyRender,lockScroll:this.lockScroll,getContainer:this.getContainer,closeOnPopstate:this.closeOnPopstate,closeOnClickOverlay:this.closeOnClickOverlay,safeAreaInsetBottom:this.safeAreaInsetBottom},class:d(),on:{input:this.toggle,"click-overlay":this.onClickOverlay}},[this.genHeader(),this.genRows(),this.genCancelText()])}}),f=(i(1611),i(7061)),v=i(3915),g=i.n(v),y=i(4771),_=(0,a.d)("divider"),k=_[0],b=_[1];function C(t,e,i,n){var s;return t("div",g()([{attrs:{role:"separator"},style:{borderColor:e.borderColor},class:b((s={dashed:e.dashed,hairline:e.hairline},s["content-"+e.contentPosition]=i.default,s))},(0,y.ED)(n,!0)]),[i.default&&i.default()])}C.props={dashed:Boolean,hairline:{type:Boolean,default:!0},contentPosition:{type:String,default:"center"}};var w=k(C),S=i(408),x=(0,a.d)("skeleton"),$=x[0],I=x[1],P="100%",L="60%";function F(t,e,i,n){if(!e.loading)return i.default&&i.default();function s(){if(e.title)return t("h3",{class:I("title"),style:{width:(0,S.N)(e.titleWidth)}})}function o(){var i=[],n=e.rowWidth;function s(t){return n===P&&t===+e.row-1?L:Array.isArray(n)?n[t]:n}for(var o=0;o<e.row;o++)i.push(t("div",{class:I("row"),style:{width:(0,S.N)(s(o))}}));return i}function a(){if(e.avatar){var i=(0,S.N)(e.avatarSize);return t("div",{class:I("avatar",e.avatarShape),style:{width:i,height:i}})}}return t("div",g()([{class:I({animate:e.animate,round:e.round})},(0,y.ED)(n)]),[a(),t("div",{class:I("content")},[s(),o()])])}F.props={title:Boolean,round:Boolean,avatar:Boolean,titleWidth:[Number,String],avatarSize:[Number,String],row:{type:[Number,String],default:0},loading:{type:Boolean,default:!0},animate:{type:Boolean,default:!0},avatarShape:{type:String,default:"round"},rowWidth:{type:[Number,String,Array],default:P}};var B=$(F),A=(i(3891),i(3822)),M=i(8898),z=i(4493),D={getArticleDetail(){let{article_id:t,uid:e}=this;(0,M.PQ)({article_id:t,user_id:e}).then((t=>{console.log(t),0==t.code?(t.data.time=(0,z.p)(t.data.time),this.article=t.data):this.$toast(t.msg)}))},toggleFav(){let{uid:t,article:{is_fav:e},article_id:i}=this;this.checkLogin()&&(e?(0,M.Ii)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_fav=!1)})):(0,M.Ks)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_fav=!0)})))},toggleLike(){let{uid:t,article:{is_like:e},article_id:i}=this;if(!t)return this.$toast("请先登录"),void setTimeout((t=>{this.$router.push("/login")}));e?(0,M.Yt)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_like=!1)})):(0,M.vL)({article_id:i,user_id:t}).then((t=>{this.$toast(t.msg),0==t.code&&(this.article.is_like=!0)}))},toggleCommentLike(t,e,i){if(!this.checkLogin())return;let{uid:n}=this;e?(0,M.vO)({comment_id:t,user_id:n}).then((t=>{console.log(t),this.$toast(t.msg),0==t.code&&(this.commentList[i].like_count=t.count,this.commentList[i].is_like=!1)})):(0,M.ar)({comment_id:t,user_id:n}).then((t=>{this.$toast(t.msg),0==t.code&&(this.commentList[i].like_count=t.count,this.commentList[i].is_like=!0)}))}},O=(i(2956),i(4269)),R={data(){return{skip:0,limit:10,commentFinished:!1,commentLoading:!1,commentList:[]}},components:{[O.Z.name]:O.Z},mounted(){},methods:{getCommentList(){let{uid:t,article_id:e,skip:i,limit:n}=this;(0,M.Rw)({user_id:t,article_id:e,skip:i,limit:n}).then((t=>{if(0==t.code){this.commentList.push(...t.data);let e=this.commentList.length;e>=t.count?this.commentFinished=!0:(console.log(1),this.skip=e,this.commentLoading=!1)}}))}}},q=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reply"},[e("van-nav-bar",{attrs:{title:0==t.replyInfo.reply_num?"回复":t.replyInfo.reply_num+"条回复",border:""},on:{"click-left":t.close},scopedSlots:t._u([{key:"left",fn:function(){return[e("van-icon",{attrs:{name:"cross",color:"#333"}})]},proxy:!0}])}),e("van-cell",{staticClass:"comment-item"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:t.replyInfo.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(t.replyInfo.info.nickname))])]),e("div",{staticClass:"content"},[t._v(t._s(t.replyInfo.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(t.replyInfo.create_time)))])])])],1),e("div",{staticStyle:{width:"100%",height:"1px",background:"black"}}),e("h3",{staticClass:"huifu"},[t._v("全部回复")]),e("commonList",{attrs:{API:t.getReplyList,params:t.params},scopedSlots:t._u([{key:"default",fn:function({list:i}){return t._l(i,(function(i){return e("van-cell",{key:i._id,staticClass:"comment-items"},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:i.info.avatar},slot:"icon"}),e("div",{attrs:{slot:"title"},slot:"title"},[e("div",{staticClass:"title-w"},[e("div",{staticClass:"name"},[t._v(t._s(i.info.nickname))])]),e("div",{staticClass:"content"},[t._v(t._s(i.content))]),e("div",{staticClass:"info"},[e("span",{staticClass:"pubdate"},[t._v(t._s(t._f("formatDate")(i.create_time)))])]),e("div",{staticStyle:{width:"280px",height:"1px",background:"#CBCFCF"}})])],1)}))}}])})],1)},T=[],Z=function(){var t=this,e=t._self._c;return e("div",[e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多数据了","immediate-check":t.immediateCheck},on:{load:t.getList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[t._t("default",null,{list:t.list})],2)],1)},E=[],V={data(){return{skip:0,loading:!1,finished:!1,list:[]}},components:{[O.Z.name]:O.Z},props:{limit:{default:10,type:Number},immediateCheck:{type:Boolean,default:!0},API:{type:Function,require:!0},params:{type:Object}},methods:{getList(){let{skip:t,limit:e,params:i}=this;console.log(this.params),this.API({skip:t,limit:e,...i}).then((t=>{if(0==t.code){this.list.push(...t.data);let e=this.list.length;e>=t.count?this.finished=!0:(this.skip=e,this.loading=!1)}}))}}},N=V,W=i(1001),j=(0,W.Z)(N,Z,E,!1,null,null,null),H=j.exports,X={name:"replyCom",data(){return{getReplyList:M.PC,params:{user_id:this.$store.state.uid,reply_comment_id:this.replyInfo._id,article_id:this.article_id}}},props:{replyInfo:{default:{}},article_id:{}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();s=s<10?"0"+s:s;let o=e.getHours();o=o<10?"0"+o:o;let a=e.getMinutes();a=a<10?"0"+a:a;let r=e.getSeconds();return r=r<10?"0"+r:r,i+"-"+n+"-"+s+" "+o+":"+a+":"+r}}},components:{commonList:H},methods:{close(){this.$emit("close")}}},Q=X,K=(0,W.Z)(Q,q,T,!1,null,"40da1f8b",null),Y=K.exports,U={name:"articleView",components:{[l.Z.name]:l.Z,[B.name]:B,[w.name]:w,[f.Z.name]:f.Z,[Y.name]:Y,[p.name]:p},mixins:[R],data(){return{commentPopupShow:!1,content:"",title:"",article_id:"",article:{},comment_type:0,reply_placeholder:"请留下您的精彩评论",reply_comment_id:"",replyPopupShow:!1,replyInfo:{},reply_active_index:0,key:1,showShare:!1,options:[{name:"QQ",icon:"qq"},{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}]}},filters:{formatDate:function(t){if(null==t)return"";{let e=new Date(t),i=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;let s=e.getDate();s=s<10?"0"+s:s;let o=e.getHours();o=o<10?"0"+o:o;let a=e.getMinutes();a=a<10?"0"+a:a;let r=e.getSeconds();return r=r<10?"0"+r:r,i+"-"+n+"-"+s+" "+o+":"+a+":"+r}}},computed:{...(0,A.rn)(["uid","userInfo"])},watch:{replyPopupShow(){console.log(this.key),this.key++}},created(){let{title:t,article_id:e}=this.$route.query;this.article_id=e,this.title=t,this.getArticleDetail()},methods:{onSelect({name:t}){let e=this.article.title,i=window.location.href;switch(t){case"QQ":window.location.href=`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title=${e}&href=${i}&content={title}`;break;case"微信":break;case"微博":window.location.href=`http://service.weibo.com/share/share.php?appkey=583395093&title=${e}&url=${window.location.href}&source=bshare&retcode=0&ralateUid=s新浪微博`;break;case"复制链接":case"二维码":case"分享海报":}},...D,openReply(t,e){this.replyPopupShow=!0,this.replyInfo={...t,index:e}},popupShow(t=0,e,i,n){this.checkLogin()&&(this.comment_type=t,this.reply_active_index=n||this.reply_active_index,0==t?(this.reply_placeholder="留下您的精彩评论",this.reply_comment_id=""):(this.reply_placeholder="回复："+e,this.reply_comment_id=i),this.commentPopupShow=!0,this.$nextTick((function(){console.log(this.$refs.content),this.$refs.content.focus()})))},submit(){let{content:t,uid:e,article_id:i,comment_type:n,reply_comment_id:s}=this;t=t.trim(),"string"==typeof t&&0!==t.length?(0,M.Ir)({content:t,user_id:e,article_id:i,comment_type:n,reply_comment_id:s}).then((s=>{if(console.log(s),this.$toast(s.msg),0==s.code)if(this.commentPopupShow=!1,this.content="",this.article.comment++,0==n){let{avatar:o,nickname:a,username:r}=this.userInfo,l={article_id:i,comment_type:n,content:t,create_time:(new Date).getTime(),like_count:0,reply_comment_id:"",reply_num:0,user_id:e,info:{avatar:o,nickname:a,username:r,_id:e},_id:s.data.id};this.commentList.unshift(l)}else this.commentList[this.reply_active_index].reply_num++,this.openReply(this.commentList[this.reply_active_index],this.reply_active_index),this.key++})):this.$toast("格式错误")}}},G=U,J=(0,W.Z)(G,n,s,!1,null,"08a5c87c",null),tt=J.exports},7549:function(){},7061:function(t,e,i){i.d(e,{Z:function(){return b}});var n=i(3915),s=i.n(n),o=i(9299),a=i(3370);function r(){return!a.sk&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var l=i(8161),c=r();function u(){c&&(0,l.kn)((0,l.oD)())}var h=i(4535),d=i(5781),m=i(855),p=i(408),f=i(9858),v=i(6631),g=i(5363),y=(0,m.d)("field"),_=y[0],k=y[1],b=_({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:(0,o.Z)({},g.T,{name:String,rules:Array,disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[Number,String],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){var t=this.getProp("readonly");if(this.clearable&&!t){var e=(0,a.Xq)(this.value)&&""!==this.value,i="always"===this.clearTrigger||"focus"===this.clearTrigger&&this.focused;return e&&i}},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return(0,o.Z)({},this.$listeners,{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:(0,p.N)(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var n=e.validator(t,e);if((0,a.tI)(n))return n.then(i);i(n)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:0!==t&&!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return(0,a.mf)(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i)?i.validator?e.runValidator(t,i).then((function(n){!1===n&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,i))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,i)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.resetValidation(),e.runRules(t).then((function(){e.validateFailed?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));i.length&&this.validate(i)}},resetValidation:function(){this.validateFailed&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=(0,a.Xq)(t)?String(t):"";var i=this.maxlength;if((0,a.Xq)(i)&&t.length>i&&(t=this.value&&this.value.length===+i?this.value:t.slice(0,i)),"number"===this.type||"digit"===this.type){var n="number"===this.type;t=(0,h.uf)(t,n,n)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var s=this.$refs.input;s&&t!==s.value&&(s.value=t),t!==this.value&&this.$emit("input",t)},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.$nextTick(this.adjustSize),this.getProp("readonly")&&this.blur()},onBlur:function(t){this.getProp("readonly")||(this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),this.$nextTick(this.adjustSize),u())},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){(0,d.PF)(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||(0,d.PF)(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){var e=(0,l.oD)();t.style.height="auto";var i=t.scrollHeight;if((0,a.Kn)(this.autosize)){var n=this.autosize,s=n.maxHeight,o=n.minHeight;s&&(i=Math.min(i,s)),o&&(i=Math.max(i,o))}i&&(t.style.height=i+"px",(0,l.kn)(e))}},genInput:function(){var t=this.$createElement,e=this.type,i=this.getProp("disabled"),n=this.getProp("readonly"),a=this.slots("input"),r=this.getProp("inputAlign");if(a)return t("div",{class:k("control",[r,"custom"]),on:{click:this.onClickInput}},[a]);var l={ref:"input",class:k("control",r),domProps:{value:this.value},attrs:(0,o.Z)({},this.$attrs,{name:this.name,disabled:i,readonly:n,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",s()([{},l]));var c,u=e;return"number"===e&&(u="text",c="decimal"),"digit"===e&&(u="tel",c="numeric"),t("input",s()([{attrs:{type:u,inputmode:c}},l]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:k("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(f.Z,{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:k("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(f.Z,{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:k("word-limit")},[t("span",{class:k("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:k("error-message",i)},[e])}}},getProp:function(t){return(0,a.Xq)(this[t])?this[t]:this.vanForm&&(0,a.Xq)(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,n=this.getProp("disabled"),s=this.getProp("labelAlign"),o={icon:this.genLeftIcon},a=this.genLabel();a&&(o.title=function(){return a});var r=this.slots("extra");return r&&(o.extra=function(){return r}),e(v.Z,{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:k("value"),titleClass:[k("label",s),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:o,class:k((t={error:this.showError,disabled:n},t["label-"+s]=s,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:k("body")},[this.genInput(),this.showClear&&e(f.Z,{attrs:{name:"clear"},class:k("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:k("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}})},1611:function(t,e,i){i(8924),i(885),i(4240),i(3164),i(7549)},6811:function(t,e,i){var n=i(855),s=i(3370),o=i(7846),a=i(9858),r=(0,n.d)("popup"),l=r[0],c=r[1];e["Z"]=l({mixins:[(0,o.e)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(i){return t.$emit(e,i)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},methods:{onClickCloseIcon:function(t){this.$emit("click-close-icon",t),this.close()}},render:function(){var t,e=arguments[0];if(this.shouldRender){var i=this.round,n=this.position,o=this.duration,r="center"===n,l=this.transition||(r?"van-fade":"van-popup-slide-"+n),u={};if((0,s.Xq)(o)){var h=r?"animationDuration":"transitionDuration";u[h]=o+"s"}return e("transition",{attrs:{appear:this.transitionAppear,name:l},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:c((t={round:i},t[n]=n,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(a.Z,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.onClickCloseIcon}})])])}}})},3891:function(t,e,i){i(8924),i(5638),i(885),i(4240),i(1510)},4535:function(t,e,i){function n(t,e,i){return Math.min(Math.max(t,e),i)}function s(t,e,i){var n=t.indexOf(e),s="";return-1===n?t:"-"===e&&0!==n?t.slice(0,n):("."===e&&t.match(/^(\.|-\.)/)&&(s=n?"-0":"0"),s+t.slice(0,n+1)+t.slice(n).replace(i,""))}function o(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?s(t,".",/\./g):t.split(".")[0],t=i?s(t,"-",/-/g):t.replace(/-/,"");var n=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(n,"")}i.d(e,{uf:function(){return o},w6:function(){return n}})},4493:function(t,e,i){i.d(e,{p:function(){return n}});i(1703);function n(t){try{t instanceof Date||(t=new Date(t));let e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return[e,i,n].map((t=>(t+"").length>1?t:"0"+t)).join("/")}catch(e){throw new Error(t+"必须是符合日期格式的字符串,或者时间戳,或者日期对象")}}}}]);
//# sourceMappingURL=824.6f8daaa9.js.map