"use strict";(self["webpackChunklaitoutiao"]=self["webpackChunklaitoutiao"]||[]).push([[381],{825:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var a=function(){var e=this,t=e._self._c;return t("div",[t("van-nav-bar",{attrs:{title:"注册","left-arrow":""},on:{"click-left":function(t){return e.$router.back()}}}),t("van-form",{ref:"regForm",on:{submit:e.onSubmit}},[t("van-field",{attrs:{name:"username",label:"手机号",placeholder:"请填写手机号",rules:[{required:!0,message:"请填写手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式错误"}]},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t("van-field",{attrs:{name:"vercode",label:"验证码",placeholder:"请填写验证码",clearable:"",rules:[{required:!0,message:"请填写验证码"},{pattern:/^\d{6}$/,message:"验证码格式错误"}]},scopedSlots:e._u([{key:"button",fn:function(){return[t("van-button",{staticStyle:{"background-color":"#7e8ad4"},attrs:{size:"small","native-type":"button",disabled:e.codeBtnDisabled},on:{click:e.sendSms}},[e._v(e._s(e.code_text))])]},proxy:!0}]),model:{value:e.vercode,callback:function(t){e.vercode=t},expression:"vercode"}}),t("van-field",{attrs:{type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"},{validator:e=>/^\w{6,12}$/.test(e),message:"密码格式错误,需要是6-12位的字母或数字"}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t("div",{staticStyle:{margin:"16px"}},[t("van-button",{staticStyle:{"background-color":"#7e8ad4"},attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交")])],1)],1)],1)},o=[],n=(s(1611),s(7061)),r=(s(3970),s(140)),l=s(2900),i={name:"login",components:{[r.Z.name]:r.Z,[n.Z.name]:n.Z},data(){return{username:"",password:"",vercode:"",codeBtnDisabled:!1,code_text:"发送验证码"}},methods:{onSubmit(e){console.log("submit",e),(0,l.YD)(e).then((e=>{console.log(e)}))},async sendSms(){try{await this.$refs.regForm.validate("username");this.codeBtnDisabled=!0,this.code_text="发送中...",(0,l.Q6)({mobile:this.username,type:"register"}).then((e=>{if(console.log(e),0==e.code){this.$toast(`短信已经发送到手机号${this.username},请注意查收`);let e=60,t=setInterval((()=>{e--,this.code_text=`${e}s后再次获取`,e<=0&&(clearInterval(t),this.code_text="再次发送",this.codeBtnDisabled=!1,e=60)}),1e3)}else this.$toast(e.msg||"发送失败"),this.codeBtnDisabled=!1,this.code_text="再次发送"})).catch((e=>{console.log(e),this.$toast(e.msg||"发送失败"),this.codeBtnDisabled=!1,this.code_text="再次发送"}))}catch(e){}}}},c=i,d=s(1001),u=(0,d.Z)(c,a,o,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=381.31fe1b8b.js.map